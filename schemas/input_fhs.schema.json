{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "PartGcompliance": {
      "type": "boolean"
    },
    "PartO_active_cooling_required": {
      "type": "boolean"
    },
    "GroundFloorArea": {
      "type": "number",
      "minimum": 0
    },
    "NumberOfBedrooms": {
      "type": "integer",
      "minimum": 0
    },
    "NumberOfWetRooms": {
      "type": "integer",
      "minimum": 0
    },
    "HeatingControlType": {
      "enum": [
        "SeparateTempControl",
        "SeparateTimeAndTempControl"
      ]
    },
    "SimulationTime": {
      "type": "object"
    },
    "ExternalConditions": {
      "type": "object",
      "required": [
        "shading_segments"
      ],
      "properties": {
        "air_temperatures": {
          "type": "array",
          "items": {
            "type": "number"
          }
        },
        "wind_speeds": {
          "type": "array",
          "items": {
            "type": "number",
            "minimum": 0
          }
        },
        "wind_directions": {
          "type": "array",
          "items": {
            "type": "number",
            "minimum": 0,
            "maximum": 360
          }
        },
        "diffuse_horizontal_radiation": {
          "type": "array",
          "items": {
            "type": "number"
          }
        },
        "direct_beam_radiation": {
          "type": "array",
          "items": {
            "type": "number"
          }
        },
        "solar_reflectivity_of_ground": {
          "type": "array",
          "items": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          }
        },
        "latitude": {
          "type": "number",
          "minimum": -180,
          "maximum": 180
        },
        "longitude": {
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "timezone": {
          "type": "number"
        },
        "start_day": {
          "type": "number"
        },
        "end_day": {
          "type": "number"
        },
        "time_series_step": {
          "type": "number"
        },
        "january_first": {
          "type": "number"
        },
        "daylight_savings": {
          "type": "string"
        },
        "leap_day_included": {
          "type": "boolean"
        },
        "direct_beam_conversion_needed": {
          "type": "boolean"
        },
        "shading_segments": {
          "type": "array",
          "minLength": 8,
          "maxLength": 36,
          "items": {
            "type": "object",
            "required": [
              "start360",
              "end360"
            ],
            "properties": {
              "number": {
                "type": "number"
              },
              "start360": {
                "type": "integer",
                "minimum": 0,
                "maximum": 360
              },
              "end360": {
                "type": "integer",
                "minimum": 0,
                "maximum": 360
              },
              "shading": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": [
                    "type",
                    "height",
                    "distance"
                  ],
                  "properties": {
                    "type": {
                      "enum": [
                        "obstacle",
                        "overhang"
                      ]
                    },
                    "height": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 400
                    },
                    "distance": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 72000
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "Appliances": {
      "type": "object",
      "propertyNames": {
        "enum": [
          "Oven",
          "Hobs",
          "Kettle",
          "Microwave",
          "Dishwasher",
          "Clothes_washing",
          "Clothes_drying",
          "Fridge",
          "Freezer",
          "Fridge-Freezer",
          "Otherdevices"
        ]
      },
      "patternProperties": {
        ".*": {
          "oneOf": [
            {
              "enum": [
                "Not Installed",
                "Default"
              ]
            },
            {
              "type": "object",
              "properties": {
                "Energysupply": {
                  "type": "string"
                },
                "kWh_per_cycle": {
                  "type": "number",
                  "minimum": 0
                },
                "kWh_per_100cycle": {
                  "type": "number",
                  "minimum": 0
                },
                "kWh_per_annum": {
                  "type": "number",
                  "minimum": 0
                },
                "kg_load": {
                  "type": "number",
                  "minimum": 0
                }
              },
              "oneOf": [
                {
                  "required": [
                    "kWh_per_cycle"
                  ]
                },
                {
                  "required": [
                    "kWh_per_100cycle"
                  ]
                },
                {
                  "required": [
                    "kWh_per_annum"
                  ]
                }
              ]
            }
          ]
        },
        "Clothes*": {
          "required": [
            "kg_load"
          ]
        },
        "Oven|Hobs|Kettle|Microwave|Dishwasher|Clothes_washing|Clothes_drying": {
          "properties": {
            "loadshifting": {
              "type": "object",
              "required": [
                "max_shift_hrs",
                "demand_limit_weighted",
                "weight"
              ],
              "properties": {
                "priority": {
                  "type": "integer"
                },
                "max_shift_hrs": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 24
                },
                "demand_limit_weighted": {
                  "type": "number"
                },
                "weight": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "properties": {
        "Hobs": {
          "required": [
            "Energysupply"
          ]
        },
        "Oven": {
          "required": [
            "Energysupply"
          ]
        },
        "Clothes_washing": {
          "properties": {
            "spin_dry_efficiency_class": {
              "enum": [
                "A",
                "B",
                "C",
                "D",
                "E",
                "F",
                "G"
              ]
            }
          }
        }
      }
    },
    "ColdWaterSource": {
      "type": "object",
      "properties": {
        "header tank": {
          "type": "object"
        },
        "mains water": {
          "type": "object"
        }
      },
      "oneOf": [
        {
          "required": [
            "header tank"
          ]
        },
        {
          "required": [
            "mains water"
          ]
        }
      ]
    },
    "EnergySupply": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": [
          "fuel",
          "is_export_capable"
        ],
        "properties": {
          "fuel": {
            "enum": [
              "mains_gas",
              "electricity",
              "lpg_bulk",
              "custom",
              "wood",
              "oil",
              "gas",
              "coal"
            ]
          },
          "is_export_capable": {
            "type": "boolean"
          }
        },
        "allOf": [
          {
            "if": {
              "properties": {
                "fuel": {
                  "const": "electricity"
                }
              }
            },
            "then": {
              "properties": {
                "priority": {
                  "enum": [
                    "ElectricBattery",
                    "diverter"
                  ]
                },
                "ElectricBattery": {
                  "type": "object",
                  "required": [
                    "capacity",
                    "charge_discharge_efficiency_round_trip",
                    "battery_age",
                    "minimum_charge_rate_one_way_trip",
                    "maximum_charge_rate_one_way_trip",
                    "maximum_discharge_rate_one_way_trip",
                    "battery_location",
                    "grid_charging_possible"
                  ],
                  "properties": {
                    "capacity": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 50
                    },
                    "charge_discharge_efficiency_round_trip": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "battery_age": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 100
                    },
                    "minimum_charge_rate_one_way_trip": {
                      "type": "number",
                      "minimum": 0
                    },
                    "maximum_charge_rate_one_way_trip": {
                      "type": "number",
                      "minimum": 0
                    },
                    "maximum_discharge_rate_one_way_trip": {
                      "type": "number",
                      "minimum": 0
                    },
                    "battery_location": {
                      "enum": [
                        "inside",
                        "outside"
                      ]
                    },
                    "grid_charging_possible": {
                      "type": "boolean"
                    }
                  }
                },
                "diverter": {
                  "type": "object",
                  "required": [
                    "HeatSource"
                  ],
                  "properties": {
                    "StorageTank": {
                      "type": "string"
                    },
                    "HeatSource": {
                      "type": "string"
                    },
                    "Controlmax": {
                      "type": "string"
                    }
                  }
                }
              },
              "if": {
                "required": [
                  "ElectricBattery"
                ],
                "properties": {
                  "ElectricBattery": {
                    "properties": {
                      "grid_charging_possible": {
                        "const": true
                      }
                    }
                  }
                }
              },
              "then": {
                "required": [
                  "threshold_charges",
                  "threshold_prices",
                  "tariff"
                ],
                "properties": {
                  "threshold_charges": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    }
                  },
                  "threshold_prices": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    }
                  },
                  "tariff": {
                    "type": "string"
                  }
                }
              }
            }
          },
          {
            "if": {
              "properties": {
                "fuel": {
                  "const": "custom"
                }
              }
            },
            "then": {
              "properties": {
                "factor": {
                  "type": "object",
                  "required": [
                    "Emissions Factor kgCO2e/kWh",
                    "Emissions Factor kgCO2e/kWh including out-of-scope emissions",
                    "Primary Energy Factor kWh/kWh delivered"
                  ],
                  "properties": {
                    "Emissions Factor kgCO2e/kWh": {
                      "type": "number"
                    },
                    "Emissions Factor kgCO2e/kWh including out-of-scope emissions": {
                      "type": "number"
                    },
                    "Primary Energy Factor kWh/kWh delivered": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        ]
      }
    },
    "OnSiteGeneration": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": [
          "type",
          "peak_power",
          "ventilation_strategy",
          "pitch",
          "orientation360",
          "base_height",
          "height",
          "width",
          "EnergySupply",
          "shading",
          "inverter_peak_power_dc",
          "inverter_peak_power_ac",
          "inverter_is_inside",
          "inverter_type"
        ],
        "properties": {
          "type": {
            "enum": [
              "PhotovoltaicSystem"
            ]
          },
          "peak_power": {
            "type": "number",
            "minimum": 0.001,
            "maximum": 100
          },
          "ventilation_strategy": {
            "enum": [
              "unventilated",
              "moderately_ventilated",
              "strongly_or_forced_ventilated",
              "rear_surface_free"
            ]
          },
          "pitch": {
            "type": "integer",
            "minimum": 0,
            "maximum": 90
          },
          "orientation360": {
            "type": "integer",
            "minimum": 0,
            "maximum": 360
          },
          "base_height": {
            "type": "number",
            "minimum": 0,
            "maximum": 500
          },
          "height": {
            "type": "number",
            "minimum": 0,
            "maximum": 100
          },
          "width": {
            "type": "number",
            "minimum": 0,
            "maximum": 100
          },
          "EnergySupply": {
            "type": "string"
          },
          "shading": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "type",
                "depth",
                "distance"
              ],
              "properties": {
                "type": {
                  "enum": [
                    "reveal",
                    "obstacle",
                    "overhang",
                    "sidefinleft",
                    "sidefinright"
                  ]
                },
                "depth": {
                  "type": "number",
                  "minimum": 0
                },
                "distance": {
                  "type": "number",
                  "minimum": 0
                }
              }
            }
          },
          "inverter_peak_power_dc": {
            "type": "number"
          },
          "inverter_peak_power_ac": {
            "type": "number"
          },
          "inverter_is_inside": {
            "type": "boolean"
          },
          "inverter_type": {
            "enum": [
              "string_inverter",
              "optimised_inverter"
            ]
          }
        }
      }
    },
    "Control": {
      "type": "object"
    },
    "HotWaterSource": {
      "type": "object",
      "properties": {
        "hw cylinder": {
          "type": "object",
          "properties": {
            "type": {
              "enum": [
                "StorageTank",
                "SmartHotWaterTank",
                "CombiBoiler",
                "PointOfUse",
                "HIU",
                "HeatBattery"
              ]
            },
            "ColdWaterSource": {
              "enum": [
                "header tank",
                "mains water"
              ]
            }
          },
          "allOf": [
            {
              "if": {
                "properties": {
                  "type": {
                    "const": "StorageTank"
                  }
                }
              },
              "then": {
                "required": [
                  "volume",
                  "daily_losses",
                  "HeatSource"
                ],
                "properties": {
                  "volume": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 1000
                  },
                  "init_temp": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 1000
                  },
                  "daily_losses": {
                    "type": "number",
                    "minimum": 0.001,
                    "maximum": 200
                  },
                  "primary_pipework": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": [
                        "location",
                        "internal_diameter_mm",
                        "external_diameter_mm",
                        "length",
                        "insulation_thermal_conductivity",
                        "insulation_thickness_mm",
                        "surface_reflectivity",
                        "pipe_contents"
                      ],
                      "properties": {
                        "location": {
                          "enum": [
                            "internal",
                            "external"
                          ]
                        },
                        "internal_diameter_mm": {
                          "type": "number",
                          "minimum": 5,
                          "maximum": 50
                        },
                        "external_diameter_mm": {
                          "type": "number",
                          "minimum": 5,
                          "maximum": 50
                        },
                        "length": {
                          "type": "number",
                          "minimum": 0.05
                        },
                        "insulation_thermal_conductivity": {
                          "type": "number"
                        },
                        "insulation_thickness_mm": {
                          "type": "number"
                        },
                        "surface_reflectivity": {
                          "type": "boolean"
                        },
                        "pipe_contents": {
                          "enum": [
                            "air",
                            "water",
                            "glycol25"
                          ]
                        }
                      }
                    }
                  },
                  "HeatSource": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "object",
                      "required": [
                        "type",
                        "heater_position",
                        "thermostat_position"
                      ],
                      "properties": {
                        "type": {
                          "enum": [
                            "ImmersionHeater",
                            "SolarThermalSystem",
                            "HeatSourceWet",
                            "HeatPump_HWOnly",
                            "Boiler"
                          ]
                        },
                        "name": {
                          "type": "string"
                        },
                        "Controlmin": {
                          "type": "string"
                        },
                        "Controlmax": {
                          "type": "string"
                        },
                        "heater_position": {
                          "type": "number",
                          "minimum": 0,
                          "maximum": 1
                        },
                        "thermostat_position": {
                          "type": "number",
                          "minimum": 0,
                          "maximum": 1
                        }
                      },
                      "allOf": [
                        {
                          "if": {
                            "properties": {
                              "type": {
                                "const": "HeatPump_HWOnly"
                              }
                            }
                          },
                          "then": {
                            "required": [
                              "EnergySupply",
                              "power_max",
                              "tank_volume_declared",
                              "heat_exchanger_surface_area_declared",
                              "daily_losses_declared",
                              "in_use_factor_mismatch",
                              "test_data"
                            ],
                            "properties": {
                              "EnergySupply": {
                                "type": "string"
                              },
                              "power_max": {
                                "type": "number"
                              },
                              "tank_volume_declared": {
                                "type": "number",
                                "minimum": 0
                              },
                              "heat_exchanger_surface_area_declared": {
                                "type": "number"
                              },
                              "daily_losses_declared": {
                                "type": "number"
                              },
                              "in_use_factor_mismatch": {
                                "type": "number"
                              },
                              "test_data": {
                                "type": "object",
                                "patternProperties": {
                                  "M|L": {
                                    "type": "object",
                                    "required": [
                                      "cop_dhw",
                                      "hw_tapping_prof_daily_total",
                                      "energy_input_measured",
                                      "power_standby",
                                      "hw_vessel_loss_daily"
                                    ],
                                    "properties": {
                                      "cop_dhw": {
                                        "type": "number"
                                      },
                                      "hw_tapping_prof_daily_total": {
                                        "type": "number"
                                      },
                                      "energy_input_measured": {
                                        "type": "number"
                                      },
                                      "power_standby": {
                                        "type": "number"
                                      },
                                      "hw_vessel_loss_daily": {
                                        "type": "number"
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "if": {
                            "properties": {
                              "type": {
                                "const": "HeatSourceWet"
                              }
                            }
                          },
                          "then": {
                            "required": [
                              "EnergySupply"
                            ],
                            "properties": {
                              "EnergySupply": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        {
                          "if": {
                            "properties": {
                              "type": {
                                "const": "ImmersionHeater"
                              }
                            }
                          },
                          "then": {
                            "required": [
                              "power",
                              "EnergySupply"
                            ],
                            "properties": {
                              "power": {
                                "type": "number",
                                "minimum": 1,
                                "maximum": 10
                              },
                              "EnergySupply": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        {
                          "if": {
                            "properties": {
                              "type": {
                                "const": "SolarThermalSystem"
                              }
                            }
                          },
                          "then": {
                            "required": [
                              "solar_loc",
                              "area_module",
                              "modules",
                              "peak_collector_efficiency",
                              "incidence_angle_modifier",
                              "first_order_hlc",
                              "second_order_hlc",
                              "collector_mass_flow_rate",
                              "power_pump",
                              "power_pump_control",
                              "EnergySupply",
                              "tilt",
                              "orientation",
                              "solar_loop_piping_hlc"
                            ],
                            "properties": {
                              "solar_loc": {
                                "enum": [
                                  "OUT",
                                  "NHS",
                                  "HS"
                                ]
                              },
                              "area_module": {
                                "type": "number",
                                "minimum": 0
                              },
                              "modules": {
                                "type": "integer",
                                "minimum": 1
                              },
                              "peak_collector_efficiency": {
                                "type": "number",
                                "minimum": 0.1,
                                "maximum": 1
                              },
                              "incidence_angle_modifier": {
                                "type": "number",
                                "minimum": 0
                              },
                              "first_order_hlc": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 100
                              },
                              "second_order_hlc": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 10
                              },
                              "collector_mass_flow_rate": {
                                "type": "number",
                                "minimum": 0
                              },
                              "power_pump": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 2000
                              },
                              "power_pump_control": {
                                "type": "number",
                                "minimum": 0
                              },
                              "EnergySupply": {
                                "type": "string"
                              },
                              "tilt": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 90
                              },
                              "orientation": {
                                "type": "number",
                                "minimum": -180,
                                "maximum": 180
                              },
                              "solar_loop_piping_hlc": {
                                "type": "number",
                                "minimum": 0
                              }
                            }
                          }
                        }
                      ]
                    }
                  },
                  "if": {
                    "properties": {
                      "HeatSource": {
                        "type": "object",
                        "additionalProperties": {
                          "properties": {
                            "type": {
                              "const": "HeatPump_HWOnly"
                            }
                          }
                        }
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "heat_exchanger_surface_area"
                    ],
                    "properties": {
                      "heat_exchanger_surface_area": {
                        "type": "number"
                      }
                    }
                  }
                }
              }
            },
            {
              "if": {
                "properties": {
                  "type": {
                    "const": "PointOfUse"
                  }
                }
              },
              "then": {
                "required": [
                  "efficiency",
                  "EnergySupply"
                ],
                "properties": {
                  "efficiency": {
                    "type": "number",
                    "minimum": 0.1,
                    "maximum": 1
                  },
                  "EnergySupply": {
                    "type": "string"
                  }
                }
              }
            },
            {
              "if": {
                "properties": {
                  "type": {
                    "const": "CombiBoiler"
                  }
                }
              },
              "then": {
                "required": [
                  "HeatSourceWet",
                  "Control",
                  "separate_DHW_tests",
                  "rejected_energy_1",
                  "rejected_factor_3",
                  "storage_loss_factor_2",
                  "daily_HW_usage"
                ],
                "properties": {
                  "HeatSourceWet": {
                    "type": "string"
                  },
                  "Control": {
                    "type": "string"
                  },
                  "separate_DHW_tests": {
                    "enum": [
                      "M&L",
                      "M&S",
                      "M only",
                      "no additional tests"
                    ]
                  },
                  "rejected_energy_1": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1
                  },
                  "rejected_factor_3": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  },
                  "storage_loss_factor_2": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100
                  },
                  "daily_HW_usage": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1000
                  }
                }
              }
            }
          ]
        }
      }
    },
    "HeatSourceWet": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": [
          "type",
          "EnergySupply"
        ],
        "properties": {
          "type": {
            "enum": [
              "HeatPump",
              "Boiler",
              "HIU",
              "HeatBattery"
            ]
          },
          "EnergySupply": {
            "type": "string"
          }
        },
        "allOf": [
          {
            "if": {
              "properties": {
                "type": {
                  "const": "HeatPump"
                }
              }
            },
            "then": {
              "required": [
                "source_type",
                "sink_type",
                "backup_ctrl_type",
                "modulating_control",
                "min_modulation_rate_35",
                "min_modulation_rate_55",
                "temp_return_feed_max",
                "temp_lower_operating_limit",
                "min_temp_diff_flow_return_for_hp_to_operate",
                "var_flow_temp_ctrl_during_test",
                "power_source_circ_pump",
                "power_standby",
                "power_crankcase_heater",
                "power_off",
                "power_max_backup",
                "time_delay_backup",
                "test_data_EN14825"
              ],
              "properties": {
                "source_type": {
                  "enum": [
                    "Ground",
                    "OutsideAir",
                    "ExhaustAirMEV",
                    "ExhaustAirMVHR",
                    "ExhaustAirMixed",
                    "WaterGround",
                    "WaterSurface"
                  ]
                },
                "sink_type": {
                  "enum": [
                    "Air",
                    "Water"
                  ]
                },
                "backup_ctrl_type": {
                  "enum": [
                    "None",
                    "TopUp",
                    "Substitute"
                  ]
                },
                "modulating_control": {
                  "type": "boolean"
                },
                "min_modulation_rate_35": {
                  "type": "number",
                  "minimum": 0
                },
                "min_modulation_rate_55": {
                  "type": "number",
                  "minimum": 0
                },
                "temp_return_feed_max": {
                  "type": "number",
                  "minimum": 4,
                  "maximum": 80
                },
                "temp_lower_operating_limit": {
                  "type": "number",
                  "minimum": -30,
                  "maximum": 0
                },
                "min_temp_diff_flow_return_for_hp_to_operate": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 50
                },
                "var_flow_temp_ctrl_during_test": {
                  "type": "boolean"
                },
                "power_heating_circ_pump": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                },
                "power_source_circ_pump": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                },
                "power_standby": {
                  "type": "number",
                  "minimum": 0
                },
                "power_crankcase_heater": {
                  "type": "number",
                  "minimum": 0
                },
                "power_off": {
                  "type": "number",
                  "minimum": 0
                },
                "power_max_backup": {
                  "type": "number",
                  "minimum": 0
                },
                "time_delay_backup": {
                  "type": "number",
                  "minimum": 0
                },
                "power_heating_warm_air_fan": {
                  "type": "number",
                  "minimum": 0
                },
                "test_data_EN14825": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "test_letter",
                      "capacity",
                      "cop",
                      "degradation_coeff",
                      "design_flow_temp",
                      "temp_outlet",
                      "temp_source",
                      "temp_test"
                    ],
                    "properties": {
                      "test_letter": {
                        "enum": [
                          "A",
                          "B",
                          "C",
                          "D",
                          "F"
                        ]
                      },
                      "capacity": {
                        "type": "number",
                        "minimum": 0
                      },
                      "cop": {
                        "type": "number",
                        "minimum": 0
                      },
                      "degradation_coeff": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1
                      },
                      "design_flow_temp": {
                        "type": "number"
                      },
                      "temp_outlet": {
                        "type": "number"
                      },
                      "temp_source": {
                        "type": "number"
                      },
                      "temp_test": {
                        "type": "number"
                      }
                    }
                  }
                }
              }
            }
          },
          {
            "if": {
              "properties": {
                "type": {
                  "const": "Boiler"
                }
              }
            },
            "then": {
              "required": [
                "rated_power",
                "efficiency_full_load",
                "efficiency_part_load",
                "boiler_location",
                "modulation_load",
                "electricity_circ_pump",
                "electricity_part_load",
                "electricity_full_load",
                "electricity_standby"
              ],
              "properties": {
                "rated_power": {
                  "type": "number",
                  "minimum": 0
                },
                "efficiency_full_load": {
                  "type": "number",
                  "minimum": 0.1,
                  "maximum": 1
                },
                "efficiency_partload": {
                  "type": "number",
                  "minimum": 0.1,
                  "maximum": 1
                },
                "boiler_location": {
                  "enum": [
                    "internal",
                    "external"
                  ]
                },
                "modulation_load": {
                  "type": "number",
                  "minimum": 0.1,
                  "maximum": 1
                },
                "electricity_circ_pump": {
                  "type": "number",
                  "minimum": 0.001,
                  "maximum": 1
                },
                "electricity_part_load": {
                  "type": "number",
                  "minimum": 0.001,
                  "maximum": 1
                },
                "electricity_full_load": {
                  "type": "number",
                  "minimum": 0.001,
                  "maximum": 1
                },
                "electricity_standby": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 0.1
                }
              }
            }
          },
          {
            "if": {
              "properties": {
                "type": {
                  "const": "HeatBattery"
                }
              }
            },
            "then": {
              "required": [
                "electricity_circ_pump",
                "electricity_standby",
                "rated_charge_power",
                "max_rated_losses",
                "ControlCharge",
                "number_of_units",
                "simultaneous_charging_and_discharging",
                "heat_storage_zone_material_kJ_per_K_above_Phase_transition",
                "heat_storage_zone_material_kJ_per_K_below_Phase_transition",
                "heat_storage_zone_material_kJ_per_K_during_Phase_transition",
                "phase_transition_temperature_upper",
                "phase_transition_temperature_lower",
                "max_temperature",
                "velocity_in_HEX_tube_at_1_l_per_min_m_per_s",
                "capillary_diameter_m",
                "A",
                "B",
                "heat_exchanger_surface_area_m2",
                "flow_rate_l_per_min"
              ],
              "properties": {
                "heat_battery_location": {
                  "enum": [
                    "internal",
                    "external"
                  ]
                },
                "electricity_circ_pump": {
                  "type": "number",
                  "minimum": 0.001,
                  "maximum": 1
                },
                "electricity_standby": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 0.1
                },
                "rated_charge_power": {
                  "type": "number",
                  "minimum": 0
                },
                "max_rated_losses": {
                  "type": "number",
                  "minimum": 0
                },
                "ControlCharge": {
                  "type": "string"
                },
                "number_of_units": {
                  "type": "integer",
                  "minimum": 1
                },
                "simultaneous_charging_and_discharging": {
                  "type": "boolean"
                },
                "heat_storage_zone_material_kJ_per_K_above_Phase_transition": {
                  "type": "number",
                  "minimum": 0
                },
                "heat_storage_zone_material_kJ_per_K_below_Phase_transition": {
                  "type": "number",
                  "minimum": 0
                },
                "heat_storage_zone_material_kJ_per_K_during_Phase_transition": {
                  "type": "number",
                  "minimum": 0
                },
                "phase_transition_temperature_upper": {
                  "type": "number"
                },
                "phase_transition_temperature_lower": {
                  "type": "number"
                },
                "velocity_in_HEX_tube_at_1_l_per_min_m_per_s": {
                  "type": "number",
                  "minimum": 0
                },
                "A": {
                  "type": "number"
                },
                "B": {
                  "type": "number"
                },
                "heat_exchanger_surface_area": {
                  "type": "number"
                },
                "flow_rate_l_per_min": {
                  "type": "number",
                  "minimum": 0
                }
              }
            }
          },
          {
            "if": {
              "properties": {
                "type": {
                  "const": "HIU"
                }
              }
            },
            "then": {
              "required": [
                "HIU_daily_loss",
                "power_max",
                "building_level_distribution_losses"
              ],
              "properties": {
                "HIU_daily_loss": {
                  "type": "number",
                  "minimum": 0
                },
                "power_max": {
                  "type": "number",
                  "minimum": 0
                },
                "building_level_distribution_losses": {
                  "type": "number",
                  "minimum": 0
                }
              }
            }
          }
        ]
      }
    },
    "HotWaterDemand": {
      "type": "object",
      "required": [
        "Distribution"
      ],
      "properties": {
        "Shower": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "required": [
              "type",
              "ColdWaterSource"
            ],
            "properties": {
              "type": {
                "enum": [
                  "MixerShower",
                  "InstantElecShower"
                ]
              },
              "ColdWaterSource": {
                "enum": [
                  "header tank",
                  "mains water"
                ]
              }
            },
            "if": {
              "properties": {
                "type": {
                  "const": "MixerShower"
                }
              }
            },
            "then": {
              "required": [
                "flowrate"
              ],
              "properties": {
                "flowrate": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 15
                },
                "WWHRS": {
                  "type": "string"
                }
              }
            },
            "else": {
              "required": [
                "rated_power",
                "EnergySupply"
              ],
              "properties": {
                "rated_power": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 30
                },
                "EnergySupply": {
                  "type": "string"
                }
              }
            }
          }
        },
        "Bath": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "required": [
              "size",
              "flowrate",
              "ColdWaterSource"
            ],
            "properties": {
              "size": {
                "type": "number",
                "minimum": 0
              },
              "flowrate": {
                "type": "number",
                "minimum": 0,
                "maximum": 15
              },
              "ColdWaterSource": {
                "enum": [
                  "header tank",
                  "mains water"
                ]
              }
            }
          }
        },
        "Other": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "required": [
              "flowrate",
              "ColdWaterSource"
            ],
            "properties": {
              "flowrate": {
                "type": "number",
                "minimum": 0.1,
                "maximum": 15
              },
              "ColdWaterSource": {
                "enum": [
                  "header tank",
                  "mains water"
                ]
              }
            }
          }
        },
        "Distribution": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "location",
              "internal_diameter_mm",
              "length"
            ],
            "properties": {
              "location": {
                "enum": [
                  "internal",
                  "external"
                ]
              },
              "internal_diameter_mm": {
                "type": "number",
                "minimum": 5,
                "maximum": 100
              },
              "length": {
                "type": "number",
                "minimum": 0,
                "maximum": 200
              }
            }
          }
        }
      }
    },
    "Events": {
      "type": "object"
    },
    "WWHRS": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": [
          "type",
          "ColdWaterSource",
          "flow_rates",
          "efficiencies",
          "utilisation_factor"
        ],
        "properties": {
          "type": {
            "enum": [
              "WWHRS_InstantaneousSystemA",
              "WWHRS_InstantaneousSystemB",
              "WWHRS_InstantaneousSystemC"
            ]
          },
          "ColdWaterSource": {
            "enum": [
              "header tank",
              "mains water"
            ]
          },
          "flow_rates": {
            "type": "array",
            "items": {
              "type": "number",
              "minimum": 0.1,
              "maximum": 500
            }
          },
          "efficiencies": {
            "type": "array",
            "items": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            }
          },
          "utilisation_factor": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          }
        }
      }
    },
    "SpaceHeatSystem": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": [
          "type"
        ],
        "properties": {
          "type": {
            "enum": [
              "ElecStorageHeater",
              "InstantElecHeater",
              "WetDistribution",
              "WarmAir"
            ]
          },
          "advanced_start": {
            "type": "number"
          },
          "temp_setback": {
            "type": "number"
          }
        },
        "allOf": [
          {
            "if": {
              "properties": {
                "type": {
                  "const": "ElecStorageHeater"
                }
              }
            },
            "then": {
              "required": [
                "pwr_in",
                "rated_power_instant",
                "storage_capacity",
                "air_flow_type",
                "frac_convective",
                "n_units",
                "EnergySupply",
                "ControlCharger",
                "Zone",
                "ESH_min_output",
                "ESH_max_output"
              ],
              "properties": {
                "pwr_in": {
                  "type": "number",
                  "minimum": 0.1,
                  "maximum": 70
                },
                "rated_power_instant": {
                  "type": "number",
                  "minimum": 0.1,
                  "maximum": 70
                },
                "storage_capacity": {
                  "type": "number",
                  "minimum": 0
                },
                "air_flow_type": {
                  "enum": [
                    "fan-assisted",
                    "damper-only"
                  ]
                },
                "frac_convective": {
                  "type": "number",
                  "minimum": 0
                },
                "n_units": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 100
                },
                "EnergySupply": {
                  "type": "string"
                },
                "Control": {
                  "type": "string"
                },
                "ControlCharger": {
                  "type": "string"
                },
                "Zone": {
                  "type": "string"
                },
                "ESH_min_output": {
                  "type": "array",
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    }
                  }
                },
                "ESH_max_output": {
                  "type": "array",
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    }
                  }
                }
              },
              "if": {
                "properties": {
                  "air_flow_type": {
                    "const": "fan-assisted"
                  }
                }
              },
              "then": {
                "required": [
                  "fan_pwr"
                ],
                "properties": {
                  "fan_pwr": {
                    "type": "number",
                    "minimum": 0
                  }
                }
              }
            }
          },
          {
            "if": {
              "properties": {
                "type": {
                  "const": "InstantElecHeater"
                }
              }
            },
            "then": {
              "required": [
                "rated_power",
                "frac_convective",
                "EnergySupply"
              ],
              "properties": {
                "rated_power": {
                  "type": "number",
                  "minimum": 0.1,
                  "maximum": 70
                },
                "frac_convective": {
                  "type": "number",
                  "minimum": 0.1,
                  "maximum": 1
                },
                "EnergySupply": {
                  "type": "string"
                },
                "Control": {
                  "type": "string"
                }
              }
            }
          },
          {
            "if": {
              "properties": {
                "type": {
                  "const": "WetDistribution"
                }
              }
            },
            "then": {
              "required": [
                "emitters",
                "temp_diff_emit_dsgn",
                "HeatSource",
                "ecodesign_controller",
                "design_flow_temp",
                "Zone"
              ],
              "properties": {
                "EnergySupply": {
                  "type": "string"
                },
                "emitters": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "wet_emitter_type",
                      "frac_convective"
                    ],
                    "properties": {
                      "wet_emitter_type": {
                        "enum": [
                          "radiator",
                          "ufh",
                          "fancoil"
                        ]
                      },
                      "frac_convective": {
                        "type": "number"
                      }
                    },
                    "allOf": [
                      {
                        "if": {
                          "properties": {
                            "wet_emitter_type": {
                              "const": "radiator"
                            }
                          }
                        },
                        "then": {
                          "required": [
                            "c",
                            "n"
                          ],
                          "properties": {
                            "c": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 2
                            },
                            "n": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 2
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "properties": {
                            "wet_emitter_type": {
                              "const": "ufh"
                            }
                          }
                        },
                        "then": {
                          "required": [
                            "equivalent_specific_thermal_mass",
                            "system_performance_factor",
                            "emitter_floor_area"
                          ],
                          "properties": {
                            "equivalent_specific_thermal_mass": {
                              "type": "number",
                              "minimum": 0
                            },
                            "system_performance_factor": {
                              "type": "number",
                              "minimum": 0
                            },
                            "emitter_floor_area": {
                              "type": "number",
                              "minimum": 0
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "properties": {
                            "wet_emitter_type": {
                              "const": "fancoil"
                            }
                          }
                        },
                        "then": {
                          "required": [
                            "n_units",
                            "fancoil_test_data"
                          ],
                          "properties": {
                            "n_units": {
                              "type": "integer",
                              "minimum": 1
                            },
                            "fancoil_test_data": {
                              "type": "object",
                              "required": [
                                "fan_speed_data",
                                "fan_power_W"
                              ],
                              "properties": {
                                "fan_speed_data": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "required": [
                                      "temperature_diff",
                                      "power_output"
                                    ],
                                    "properties": {
                                      "temperature_diff": {
                                        "type": "number"
                                      },
                                      "power_output": {
                                        "type": "array",
                                        "items": {
                                          "type": "number",
                                          "minimum": 0
                                        }
                                      }
                                    }
                                  }
                                },
                                "fan_power_W": {
                                  "type": "array",
                                  "items": {
                                    "type": "number",
                                    "minimum": 0
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                },
                "temp_diff_emit_dsgn": {
                  "type": "number",
                  "maximum": 70
                },
                "variable_flow": {
                  "type": "boolean"
                },
                "bypass_percentage_recirculated": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                },
                "HeatSource": {
                  "type": "object",
                  "required": [
                    "name"
                  ],
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "temp_flow_limit_upper": {
                      "type": "number"
                    }
                  }
                },
                "Control": {
                  "type": "string"
                },
                "ecodesign_controller": {
                  "type": "object",
                  "required": [
                    "ecodesign_control_class"
                  ],
                  "properties": {
                    "ecodesign_control_class": {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 8
                    },
                    "min_outdoor_temp": {
                      "type": "integer",
                      "minimum": -60,
                      "maximum": 30
                    },
                    "max_outdoor_temp": {
                      "type": "integer",
                      "minimum": 10,
                      "maximum": 50
                    },
                    "min_flow_temp": {
                      "type": "integer",
                      "minimum": 20,
                      "maximum": 120
                    }
                  }
                },
                "design_flow_temp": {
                  "type": "integer",
                  "minimum": 20,
                  "maximum": 120
                },
                "Zone": {
                  "type": "string"
                }
              },
              "allOf": [
                {
                  "if": {
                    "oneOf": [
                      {
                        "properties": {
                          "ecodesign_control_class": {
                            "const": 2
                          }
                        }
                      },
                      {
                        "properties": {
                          "ecodesign_control_class": {
                            "const": 3
                          }
                        }
                      },
                      {
                        "properties": {
                          "ecodesign_control_class": {
                            "const": 6
                          }
                        }
                      },
                      {
                        "properties": {
                          "ecodesign_control_class": {
                            "const": 7
                          }
                        }
                      }
                    ]
                  },
                  "then": {
                    "required": [
                      "min_outdoor_temp",
                      "max_outdoor_temp",
                      "min_flow_temp"
                    ]
                  }
                },
                {
                  "if": {
                    "required": [
                      "variable_flow"
                    ],
                    "properties": {
                      "variable_flow": {
                        "const": true
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "min_flow_rate",
                      "max_flow_rate"
                    ],
                    "properties": {
                      "min_flow_rate": {
                        "type": "number"
                      },
                      "max_flow_rate": {
                        "type": "number"
                      }
                    }
                  },
                  "else": {
                    "required": [
                      "design_flow_rate"
                    ],
                    "properties": {
                      "design_flow_rate": {
                        "type": "number"
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "emitters": {
                        "type": "array",
                        "contains": {
                          "type": "object",
                          "properties": {
                            "wet_emitter_type": {
                              "const": "radiator"
                            }
                          }
                        }
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "thermal_mass"
                    ],
                    "properties": {
                      "thermal_mass": {
                        "type": "number"
                      }
                    }
                  }
                }
              ]
            }
          },
          {
            "if": {
              "properties": {
                "type": {
                  "const": "WarmAir"
                }
              }
            },
            "then": {
              "required": [
                "temp_diff_emit_dsgn",
                "frac_convective",
                "HeatSource"
              ],
              "properties": {
                "temp_diff_emit_dsgn": {
                  "type": "number",
                  "maximum": 70
                },
                "frac_convective": {
                  "type": "number",
                  "minimum": 0.1,
                  "maximum": 1
                },
                "HeatSource": {
                  "type": "object",
                  "required": [
                    "name"
                  ],
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "temp_flow_limit_upper": {
                      "type": "number"
                    }
                  }
                },
                "Control": {
                  "type": "string"
                }
              }
            }
          }
        ]
      }
    },
    "SpaceCoolSystem": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": [
          "type",
          "cooling_capacity",
          "efficiency",
          "frac_convective",
          "EnergySupply"
        ],
        "properties": {
          "type": {
            "enum": [
              "AirConditioning"
            ]
          },
          "cooling_capacity": {
            "type": "number"
          },
          "efficiency": {
            "type": "number",
            "minimum": 0,
            "maximum": 25
          },
          "frac_convective": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          },
          "EnergySupply": {
            "type": "string"
          }
        }
      }
    },
    "General": {
      "type": "object",
      "required": [
        "storeys_in_building",
        "build_type"
      ],
      "properties": {
        "storeys_in_building": {
          "type": "integer",
          "minimum": 1,
          "maximum": 250
        },
        "build_type": {
          "enum": [
            "flat",
            "house"
          ]
        }
      },
      "if": {
        "properties": {
          "build_type": {
            "const": "flat"
          }
        }
      },
      "then": {
        "required": [
          "storey_of_dwelling"
        ],
        "properties": {
          "storey_of_dwelling": {
            "type": "integer",
            "minimum": -50,
            "maximum": 199
          }
        }
      }
    },
    "InfiltrationVentilation": {
      "type": "object",
      "required": [
        "cross_vent_possible",
        "shield_class",
        "terrain_class",
        "ventilation_zone_base_height",
        "altitude",
        "noise_nuisance",
        "Vents",
        "Leaks",
        "CombustionAppliances"
      ],
      "properties": {
        "cross_vent_possible": {
          "type": "boolean"
        },
        "shield_class": {
          "enum": [
            "Open",
            "Normal",
            "Shielded"
          ]
        },
        "terrain_class": {
          "enum": [
            "OpenWater",
            "OpenField",
            "Suburban",
            "Urban"
          ]
        },
        "ventilation_zone_base_height": {
          "type": "number",
          "minimum": -150,
          "maximum": 750
        },
        "altitude": {
          "type": "number",
          "minimum": -150,
          "maximum": 7200
        },
        "vent_opening_ratio_init": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "ach_min_static_calcs": {
          "type": "number"
        },
        "ach_max_static_calcs": {
          "type": "number"
        },
        "noise_nuisance": {
          "type": "boolean"
        },
        "Vents": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "required": [
              "mid_height_air_flow_path",
              "area_cm2",
              "pressure_difference_ref",
              "orientation360",
              "pitch"
            ],
            "properties": {
              "mid_height_air_flow_path": {
                "type": "number",
                "minimum": 1,
                "maximum": 60
              },
              "area_cm2": {
                "type": "number",
                "minimum": 1,
                "maximum": 999999
              },
              "pressure_difference_ref": {
                "type": "number",
                "minimum": 0
              },
              "orientation360": {
                "type": "number",
                "minimum": 0,
                "maximum": 360
              },
              "pitch": {
                "type": "number",
                "minimum": 0,
                "maximum": 180
              }
            }
          }
        },
        "Leaks": {
          "type": "object",
          "required": [
            "ventilation_zone_height",
            "test_pressure",
            "test_result",
            "env_area"
          ],
          "properties": {
            "ventilation_zone_height": {
              "type": "number",
              "minimum": 1,
              "maximum": 120
            },
            "test_pressure": {
              "type": "number",
              "minimum": 0,
              "maximum": 500
            },
            "test_result": {
              "type": "number",
              "minimum": 0
            },
            "env_area": {
              "type": "number",
              "minimum": 5,
              "maximum": 72000
            }
          }
        },
        "MechanicalVentilation": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "required": [
              "sup_air_flw_ctrl",
              "sup_air_temp_ctrl",
              "vent_type",
              "EnergySupply",
              "design_outdoor_air_flow_rate"
            ],
            "properties": {
              "sup_air_flw_ctrl": {
                "enum": [
                  "ODA",
                  "LOAD"
                ]
              },
              "sup_air_temp_ctrl": {
                "enum": [
                  "NO_CTRL",
                  "CONST",
                  "ODA_COMP",
                  "LOAD_COMP"
                ]
              },
              "design_zone_cooling_covered_by_mech_vent": {
                "type": "number"
              },
              "design_zone_heating_covered_by_mech_vent": {
                "type": "number"
              },
              "vent_type": {
                "enum": [
                  "Decentralised continuous MEV",
                  "Centralised continuous MEV",
                  "MVHR",
                  "Intermittent MEV"
                ]
              },
              "EnergySupply": {
                "type": "string"
              },
              "design_outdoor_air_flow_rate": {
                "type": "number",
                "minimum": 0
              }
            },
            "allOf": [
              {
                "if": {
                  "properties": {
                    "vent_type": {
                      "const": "MVHR"
                    }
                  }
                },
                "then": {
                  "required": [
                    "mvhr_eff",
                    "mvhr_location",
                    "ductwork"
                  ],
                  "properties": {
                    "mvhr_eff": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "mvhr_location": {
                      "enum": [
                        "inside",
                        "outside"
                      ]
                    },
                    "ductwork": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "cross_section_shape",
                          "internal_diameter_mm",
                          "external_diameter_mm",
                          "length",
                          "insulation_thermal_conductivity",
                          "insulation_thickness_mm",
                          "reflective",
                          "duct_type"
                        ],
                        "properties": {
                          "cross_section_shape": {
                            "enum": [
                              "circular",
                              "rectangular"
                            ]
                          },
                          "internal_diameter_mm": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 1000
                          },
                          "external_diameter_mm": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 1000
                          },
                          "length": {
                            "type": "number",
                            "minimum": 0
                          },
                          "insulation_thermal_conductivity": {
                            "type": "number",
                            "minimum": 0
                          },
                          "insulation_thickness_mm": {
                            "type": "number",
                            "minimum": 0,
                            "maximum": 100
                          },
                          "reflective": {
                            "type": "boolean"
                          },
                          "duct_type": {
                            "enum": [
                              "supply",
                              "extract",
                              "intake",
                              "exhaust"
                            ]
                          }
                        }
                      }
                    }
                  }
                }
              },
              {
                "if": {
                  "anyOf": [
                    {
                      "properties": {
                        "vent_type": {
                          "const": "Decentralised continuous MEV"
                        }
                      }
                    },
                    {
                      "properties": {
                        "vent_type": {
                          "const": "Intermittent MEV"
                        }
                      }
                    }
                  ]
                },
                "then": {
                  "required": [
                    "SFP"
                  ],
                  "properties": {
                    "SFP": {
                      "type": "number"
                    }
                  }
                }
              },
              {
                "if": {
                  "anyOf": [
                    {
                      "properties": {
                        "vent_type": {
                          "const": "Centralised continuous MEV"
                        }
                      }
                    },
                    {
                      "properties": {
                        "vent_type": {
                          "const": "MVHR"
                        }
                      }
                    }
                  ]
                },
                "then": {
                  "required": [
                    "measured_fan_power",
                    "measured_air_flow_rate"
                  ],
                  "properties": {
                    "measured_fan_power": {
                      "type": "number"
                    },
                    "measured_air_flow_rate": {
                      "type": "number"
                    }
                  }
                }
              }
            ]
          }
        },
        "PDUs": {
          "type": "object"
        },
        "Cowls": {
          "type": "object"
        },
        "CombustionAppliances": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "required": [
              "supply_situation",
              "exhaust_situation",
              "fuel_type",
              "appliance_type"
            ],
            "properties": {
              "supply_situation": {
                "enum": [
                  "room_air",
                  "outside"
                ]
              },
              "exhaust_situation": {
                "enum": [
                  "into_room",
                  "into_separate_duct",
                  "into_mech_vent"
                ]
              },
              "fuel_type": {
                "enum": [
                  "wood",
                  "gas",
                  "oil",
                  "coal"
                ]
              }
            },
            "allOf": [
              {
                "if": {
                  "properties": {
                    "fuel_type": {
                      "const": "wood"
                    }
                  }
                },
                "then": {
                  "properties": {
                    "appliance_type": {
                      "enum": [
                        "open_fireplace"
                      ]
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "fuel_type": {
                      "const": "gas"
                    }
                  }
                },
                "then": {
                  "properties": {
                    "appliance_type": {
                      "enum": [
                        "closed_with_fan",
                        "open_gas_flue_balancer",
                        "open_gas_kitchen_stove",
                        "open_gas_fire"
                      ]
                    }
                  }
                }
              },
              {
                "if": {
                  "anyOf": [
                    {
                      "properties": {
                        "fuel_type": {
                          "const": "oil"
                        }
                      }
                    },
                    {
                      "properties": {
                        "fuel_type": {
                          "const": "coal"
                        }
                      }
                    }
                  ]
                },
                "then": {
                  "properties": {
                    "appliance_type": {
                      "enum": [
                        "closed_fire"
                      ]
                    }
                  }
                }
              }
            ]
          }
        }
      }
    },
    "Zone": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": [
          "area",
          "volume",
          "Lighting",
          "BuildingElement",
          "ThermalBridging"
        ],
        "properties": {
          "SpaceHeatSystem": {
            "type": [
              "string",
              "array"
            ],
            "items": {
              "type": "string"
            }
          },
          "SpaceCoolSystem": {
            "type": [
              "string",
              "array"
            ],
            "items": {
              "type": "string"
            }
          },
          "SpaceHeatControl": {
            "enum": [
              "livingroom",
              "restofdwelling"
            ]
          },
          "area": {
            "type": "number",
            "minimum": 0,
            "maximum": 10000
          },
          "volume": {
            "type": "number",
            "minimum": 0,
            "maximum": 50000
          },
          "Lighting": {
            "type": "object",
            "required": [
              "bulbs"
            ],
            "properties": {
              "bulbs": {
                "type": "object",
                "anyOf": [
                  {
                    "required": [
                      "incandescent"
                    ]
                  },
                  {
                    "required": [
                      "led"
                    ]
                  }
                ],
                "properties": {
                  "incandescent": {
                    "type": "object",
                    "required": [
                      "count",
                      "power",
                      "efficacy"
                    ],
                    "properties": {
                      "count": {
                        "type": "integer",
                        "minimum": 1
                      },
                      "power": {
                        "type": "number",
                        "minimum": 0
                      },
                      "efficacy": {
                        "type": "number",
                        "minimum": 0
                      }
                    }
                  },
                  "led": {
                    "type": "object",
                    "required": [
                      "count",
                      "power",
                      "efficacy"
                    ],
                    "properties": {
                      "count": {
                        "type": "integer",
                        "minimum": 1
                      },
                      "power": {
                        "type": "number",
                        "minimum": 0
                      },
                      "efficacy": {
                        "type": "number",
                        "minimum": 0
                      }
                    }
                  }
                }
              }
            }
          },
          "BuildingElement": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "type": {
                  "enum": [
                    "BuildingElementAdjacentConditionedSpace",
                    "BuildingElementAdjacentUnconditionedSpace_Simple",
                    "BuildingElementGround",
                    "BuildingElementOpaque",
                    "BuildingElementTransparent"
                  ]
                },
                "pitch": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 180
                },
                "thermal_resistance_construction": {
                  "type": "number",
                  "minimum": 0.01,
                  "maximum": 50
                },
                "u_value": {
                  "type": "number",
                  "minimum": 0.01,
                  "maximum": 10
                }
              },
              "anyOf": [
                {
                  "required": [
                    "thermal_resistance_construction"
                  ]
                },
                {
                  "required": [
                    "u_value"
                  ]
                }
              ],
              "required": [
                "type",
                "pitch"
              ],
              "allOf": [
                {
                  "if": {
                    "anyOf": [
                      {
                        "properties": {
                          "type": {
                            "const": "BuildingElementAdjacentConditionedSpace"
                          }
                        }
                      },
                      {
                        "properties": {
                          "type": {
                            "const": "BuildingElementAdjacentUnconditionedSpace_Simple"
                          }
                        }
                      }
                    ]
                  },
                  "then": {
                    "required": [
                      "area",
                      "areal_heat_capacity",
                      "mass_distribution_class"
                    ],
                    "properties": {
                      "areal_heat_capacity": {
                        "type": "number",
                        "minimum": 100,
                        "maximum": 5000000
                      },
                      "mass_distribution_class": {
                        "enum": [
                          "I",
                          "E",
                          "IE",
                          "D",
                          "M"
                        ]
                      },
                      "area": {
                        "type": "number",
                        "minimum": 0.01,
                        "maximum": 10000
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "type": {
                        "const": "BuildingElementAdjacentUnconditionedSpace_Simple"
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "thermal_resistance_unconditioned_space"
                    ],
                    "properties": {
                      "thermal_resistance_unconditioned_space": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 3
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "type": {
                        "const": "BuildingElementGround"
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "u_value",
                      "total_area",
                      "floor_type",
                      "thickness_walls",
                      "perimeter",
                      "psi_wall_floor_junc",
                      "thermal_resistance_floor_construction",
                      "areal_heat_capacity",
                      "mass_distribution_class",
                      "area"
                    ],
                    "properties": {
                      "total_area": {
                        "type": "number",
                        "minimum": 5
                      },
                      "floor_type": {
                        "enum": [
                          "Slab_no_edge_insulation",
                          "Slab_edge_insulation",
                          "Suspended_floor",
                          "Heated_basement",
                          "Unheated_basement"
                        ]
                      },
                      "thickness_walls": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                      },
                      "perimeter": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1000
                      },
                      "psi_wall_floor_junc": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 2
                      },
                      "thermal_resistance_floor_construction": {
                        "type": "number",
                        "minimum": 0.000001,
                        "maximum": 50
                      },
                      "areal_heat_capacity": {
                        "type": "number",
                        "minimum": 100,
                        "maximum": 5000000
                      },
                      "mass_distribution_class": {
                        "enum": [
                          "I",
                          "E",
                          "IE",
                          "D",
                          "M"
                        ]
                      },
                      "area": {
                        "type": "number",
                        "minimum": 5,
                        "maximum": 10000
                      }
                    },
                    "allOf": [
                      {
                        "if": {
                          "properties": {
                            "floor_type": {
                              "const": "Slab_edge_insulation"
                            }
                          }
                        },
                        "then": {
                          "required": [
                            "edge_insulation"
                          ],
                          "properties": {
                            "edge_insulation": {
                              "type": "object",
                              "required": [
                                "type",
                                "width",
                                "edge_thermal_resistance"
                              ],
                              "properties": {
                                "type": {
                                  "enum": [
                                    "horizontal",
                                    "vertical"
                                  ]
                                },
                                "width": {
                                  "type": "number"
                                },
                                "edge_thermal_resistance": {
                                  "type": "number"
                                }
                              }
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "properties": {
                            "floor_type": {
                              "const": "Suspended_floor"
                            }
                          }
                        },
                        "then": {
                          "required": [
                            "height_upper_surface",
                            "thermal_transm_walls",
                            "shield_fact_location",
                            "thickness_walls",
                            "thermal_resist_insul"
                          ],
                          "properties": {
                            "height_upper_surface": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 100
                            },
                            "thermal_transm_walls": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 100
                            },
                            "area_per_perimeter_vent": {
                              "type": "number"
                            },
                            "shield_fact_location": {
                              "enum": [
                                "Sheltered",
                                "Average",
                                "Exposed"
                              ]
                            },
                            "thickness_walls": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 100
                            },
                            "thermal_resist_insul": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 100
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "anyOf": [
                            {
                              "properties": {
                                "floor_type": {
                                  "const": "Heated_basement"
                                }
                              }
                            },
                            {
                              "properties": {
                                "floor_type": {
                                  "const": "Unheated_basement"
                                }
                              }
                            }
                          ]
                        },
                        "then": {
                          "required": [
                            "thickness_walls",
                            "depth_basement_floor",
                            "thermal_resist_walls_base"
                          ],
                          "properties": {
                            "thickness_walls": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 100
                            },
                            "depth_basement_floor": {
                              "type": "number"
                            },
                            "thermal_resist_walls_base": {
                              "type": "number"
                            }
                          }
                        }
                      },
                      {
                        "if": {
                          "properties": {
                            "floor_type": {
                              "const": "Unheated_basement"
                            }
                          }
                        },
                        "then": {
                          "required": [
                            "thermal_transm_envi_base",
                            "thermal_transm_walls",
                            "height_basement_walls"
                          ],
                          "properties": {
                            "thermal_transm_envi_base": {
                              "type": "number"
                            },
                            "thermal_transm_walls": {
                              "type": "number"
                            },
                            "height_basement_walls": {
                              "type": "number"
                            }
                          }
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "properties": {
                      "type": {
                        "const": "BuildingElementOpaque"
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "solar_absorption_coeff",
                      "areal_heat_capacity",
                      "mass_distribution_class",
                      "orientation360",
                      "base_height",
                      "height",
                      "width",
                      "area"
                    ],
                    "properties": {
                      "is_unheated_pitched_roof": {
                        "type": "boolean"
                      },
                      "is_external_door": {
                        "type": "boolean"
                      },
                      "solar_absorption_coeff": {
                        "type": "number",
                        "minimum": 0.01,
                        "maximum": 1
                      },
                      "areal_heat_capacity": {
                        "type": "number",
                        "minimum": 100,
                        "maximum": 5000000
                      },
                      "mass_distribution_class": {
                        "enum": [
                          "I",
                          "E",
                          "IE",
                          "D",
                          "M"
                        ]
                      },
                      "orientation360": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 360
                      },
                      "base_height": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 500
                      },
                      "height": {
                        "type": "number",
                        "minimum": 0.001,
                        "maximum": 50
                      },
                      "width": {
                        "type": "number",
                        "minimum": 0.001,
                        "maximum": 100
                      },
                      "area": {
                        "type": "number",
                        "minimum": 0.01,
                        "maximum": 10000
                      }
                    },
                    "allOf": [
                      {
                        "if": {
                          "type": "object",
                          "properties": {
                            "pitch": {
                              "type": "number",
                              "minimum": 60,
                              "maximum": 120
                            }
                          }
                        },
                        "then": {
                          "required": [
                            "is_external_door"
                          ]
                        }
                      },
                      {
                        "if": {
                          "type": "object",
                          "properties": {
                            "pitch": {
                              "type": "number",
                              "maximum": 60
                            }
                          }
                        },
                        "then": {
                          "required": [
                            "is_unheated_pitched_roof"
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "properties": {
                      "type": {
                        "const": "BuildingElementTransparent"
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "frame_area_fraction",
                      "g_value",
                      "mid_height",
                      "max_window_open_area",
                      "security_risk",
                      "window_part_list",
                      "shading",
                      "orientation360",
                      "base_height",
                      "height",
                      "width"
                    ],
                    "properties": {
                      "frame_area_fraction": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1
                      },
                      "g_value": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1
                      },
                      "free_area_height": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                      },
                      "mid_height": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                      },
                      "max_window_open_area": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                      },
                      "security_risk": {
                        "type": "boolean"
                      },
                      "window_part_list": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "required": [
                            "mid_height_air_flow_path"
                          ],
                          "properties": {
                            "mid_height_air_flow_path": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 100
                            }
                          }
                        }
                      },
                      "shading": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "required": [
                            "type",
                            "depth",
                            "distance"
                          ],
                          "properties": {
                            "type": {
                              "enum": [
                                "overhang",
                                "sidefinleft",
                                "sidefinright"
                              ]
                            },
                            "depth": {
                              "type": "number",
                              "minimum": 0
                            },
                            "distance": {
                              "type": "number",
                              "minimum": 0
                            }
                          }
                        }
                      },
                      "treatment": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "required": [
                            "type",
                            "controls",
                            "delta_r",
                            "trans_red"
                          ],
                          "properties": {
                            "type": {
                              "enum": [
                                "curtains",
                                "blinds"
                              ]
                            },
                            "controls": {
                              "enum": [
                                "auto_motorised",
                                "manual"
                              ]
                            },
                            "delta_r": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 100
                            },
                            "trans_red": {
                              "type": "number",
                              "minimum": 0,
                              "maximum": 1
                            }
                          }
                        }
                      },
                      "orientation360": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 360
                      },
                      "base_height": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 500
                      },
                      "height": {
                        "type": "number",
                        "minimum": 0.001,
                        "maximum": 50
                      },
                      "width": {
                        "type": "number",
                        "minimum": 0.001,
                        "maximum": 100
                      }
                    }
                  }
                }
              ]
            }
          },
          "ThermalBridging": {
            "type": [
              "object",
              "number"
            ],
            "additionalProperties": {
              "type": "object",
              "properties": {
                "type": {
                  "enum": [
                    "ThermalBridgeLinear",
                    "ThermalBridgePoint"
                  ]
                }
              },
              "required": [
                "type"
              ],
              "allOf": [
                {
                  "if": {
                    "properties": {
                      "type": {
                        "const": "ThermalBridgeLinear"
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "linear_thermal_transmittance",
                      "length",
                      "junction_type"
                    ],
                    "properties": {
                      "linear_thermal_transmittance": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 2
                      },
                      "length": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 10000
                      },
                      "junction_type": {
                        "enum": [
                          "E1",
                          "E2",
                          "E3",
                          "E4",
                          "E5",
                          "E6",
                          "E7",
                          "E8",
                          "E9",
                          "E10",
                          "E11",
                          "E12",
                          "E13",
                          "E14",
                          "E15",
                          "E16",
                          "E17",
                          "E18",
                          "E19",
                          "E20",
                          "E21",
                          "E22",
                          "E23",
                          "E24",
                          "E25",
                          "P1",
                          "P2",
                          "P3",
                          "P4",
                          "P5",
                          "P6",
                          "P7",
                          "P8",
                          "R1",
                          "R2",
                          "R3",
                          "R4",
                          "R5",
                          "R6",
                          "R7",
                          "R8",
                          "R9",
                          "R10",
                          "R11"
                        ]
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "type": {
                        "const": "ThermalBridgePoint"
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "heat_transfer_coeff"
                    ],
                    "properties": {
                      "heat_transfer_coeff": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 2
                      }
                    }
                  }
                }
              ]
            }
          }
        }
      }
    }
  },
  "required": [
    "PartGcompliance",
    "NumberOfBedrooms",
    "HeatingControlType",
    "SimulationTime",
    "ExternalConditions",
    "Appliances",
    "ColdWaterSource",
    "EnergySupply",
    "Control",
    "HotWaterSource",
    "HotWaterDemand",
    "Events",
    "SpaceHeatSystem",
    "General",
    "InfiltrationVentilation",
    "Zone"
  ]
}
